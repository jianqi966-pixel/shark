<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">o"
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=n>
    <title>2026 èƒ½é‡é‡ç»„å®éªŒå®¤foræ­†æƒ </title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { background: #020617; color: white; margin: 0; font-family: sans-serif; overflow: hidden; }
        .lab-card { 
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.8);
        }
        .glow-blue { filter: drop-shadow(0 0 20px #3b82f6); }
        .pulse-slow { animation: pulse 3s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useRef } = React;

        const App = () => {
            const [step, setStep] = useState(0);
            const [isRunning, setIsRunning] = useState(false);
            const [status, setStatus] = useState("SYSTEM READY");
            const [aiMessage, setAiMessage] = useState("");
            const audioCtxRef = useRef(null);

            const initAudio = () => {
                if (!audioCtxRef.current) {
                    audioCtxRef.current = new (window.AudioContext || window.webkitAudioContext)();
                }
                if (audioCtxRef.current.state === 'suspended') audioCtxRef.current.resume();
            };

            const playTone = (freq, type = 'sine', duration = 0.2) => {
                try {
                    initAudio();
                    const ctx = audioCtxRef.current;
                    const osc = ctx.createOscillator();
                    const gain = ctx.createGain();
                    osc.type = type;
                    osc.frequency.setValueAtTime(freq, ctx.currentTime);
                    gain.gain.setValueAtTime(0.3, ctx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);
                    osc.connect(gain);
                    gain.connect(ctx.destination);
                    osc.start();
                    osc.stop(ctx.currentTime + duration);
                } catch (e) {}
            };

            const fetchFortune = async () => {
                const apiKey = ""; 
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: "å†™ä¸€å¥é€ç»™å–œæ¬¢çš„å¥³ç”Ÿçš„2026ç¥ç¦è¯­ï¼Œæµªæ¼«ç®€çŸ­ï¼Œ15å­—ä»¥å†…ã€‚" }] }],
                            systemInstruction: { parts: [{ text: "æ¸©æŸ”è¯­æ°”ï¼Œä¸å¸¦Emojiã€‚" }] }
                        })
                    });
                    const data = await response.json();
                    setAiMessage(data.candidates?.[0]?.content?.parts?.[0]?.text || "2026 çš„ç’€ç’¨å·²åœ¨ä½ çœ¼çœ¸ç»½æ”¾ã€‚");
                } catch (e) {
                    setAiMessage("2026: æ‰€æœ‰çš„åšæŒ,æœ€åéƒ½ä¼šåƒé’»çŸ³ä¸€æ ·ç’€ç’¨ã€‚");
                }
            };

            const start = async () => {
                if (isRunning) return;
                initAudio();
                setIsRunning(true);
                setStep(0);
                setAiMessage("");
                
                const stages = ["å¹³å®‰é¡ºé‚", "ä¸¢æ‰çƒ¦æ¼", "å‹åŠ›æ¶ˆå¤±", "å¦ææ³°æ¥", "è¯¸äº‹é¡ºåˆ©", "å­¦ä¸šè¿›æ­¥", "æ”¶é›†å¥½è¿"];
                
                for (let i = 1; i <= 7; i++) {
                    setStatus(stages[i-1]);
                    if (i < 7) {
                        playTone(200 + (i * 30), 'triangle', 0.1);
                    } else {
                        playTone(880, 'sine', 0.8);
                        window.confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 } });
                        fetchFortune();
                    }
                    await new Promise(r => setTimeout(r, 600));
                    setStep(i);
                }
                setIsRunning(false);
            };

            return (
                <div className="min-h-screen flex items-center justify-center p-6 bg-black">
                    <div className="w-full max-w-sm lab-card rounded-[2.5rem] p-10 text-center relative border border-white/10">
                        <div className="mb-10 opacity-20 text-[9px] tracking-[0.4em]">
                            XIN HUI SPECIAL EDITION
                        </div>

                        {/* æ ¸å¿ƒæ˜¾ç¤ºï¼šæ¢æˆä¸‡èƒ½çš„é’»çŸ³/æ˜Ÿæ˜Ÿ Emoji */}
                        <div className={`text-7xl mb-10 transition-all duration-1000 ${step === 7 ? 'scale-125 glow-blue pulse-slow' : 'scale-75 opacity-20'}`}>
                            {step === 7 ? 'ğŸ’' : 'ğŸ¥'}
                        </div>

                        <h2 className="text-lg font-bold tracking-widest mb-3">
                            {step === 7 ? "2026 ç’€ç’¨ç»½æ”¾" : "2025 ä¸¢æ‰å‹åŠ›"}
                        </h2>
                        
                        <p className="text-blue-500 text-[10px] mb-10 tracking-[0.3em] font-bold h-4">
                            {status}
                        </p>

                        {step === 7 && (
                            <div className="mb-10 p-5 rounded-2xl bg-blue-500/5 border border-blue-500/10">
                                <p className="text-sm italic text-blue-100/90 leading-relaxed">
                                    {aiMessage ? `"${aiMessage}"` : "æ­£åœ¨æ„Ÿåº”é‡å­æ³¢æ®µ..."}
                                </p>
                            </div>
                        )}

                        <button 
                            onClick={start} 
                            disabled={isRunning}
                            className="w-full py-5 rounded-2xl bg-white text-black font-bold text-[10px] tracking-[0.4em] active:scale-95 disabled:opacity-20 transition-all"
                        >
                            {isRunning ? "PROCESSING..." : "ACTIVATE"}
                        </button>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
