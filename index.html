<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 èƒ½é‡é‡ç»„å®éªŒå®¤foræ­†æƒ </title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ç¤¼èŠ±æ’ä»¶ -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { background-color: #030712; color: white; margin: 0; overflow: hidden; font-family: monospace; }
        .glass-panel { background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .diamond-glow { filter: drop-shadow(0 0 25px #60a5fa); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .typing { border-right: 2px solid #60a5fa; animation: blink 0.75s step-end infinite; }
        @keyframes blink { from, to { border-color: transparent } 50% { border-color: #60a5fa } }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        const App = () => {
            const [step, setStep] = useState(0);
            const [isRunning, setIsRunning] = useState(false);
            const [status, setStatus] = useState("å‡†å¤‡å°±ç»ª");
            const [aiMessage, setAiMessage] = useState("");
            const [isAiLoading, setIsAiLoading] = useState(false);

            // 1. éŸ³æ•ˆå‡½æ•°
            const playTone = (freq, type = 'sine', duration = 0.2) => {
                try {
                    const ctx = new (window.AudioContext || window.webkitAudioContext)();
                    const osc = ctx.createOscillator();
                    const gain = ctx.createGain();
                    osc.type = type;
                    osc.frequency.setValueAtTime(freq, ctx.currentTime);
                    gain.gain.setValueAtTime(0.5, ctx.currentTime);
                    gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);
                    osc.connect(gain);
                    gain.connect(ctx.destination);
                    osc.start();
                    osc.stop(ctx.currentTime + duration);
                } catch (e) {}
            };

            // 2. Gemini AI å‡½æ•°
            const fetchFortune = async () => {
                setIsAiLoading(true);
                const apiKey = ""; // è¿è¡Œæ—¶è‡ªåŠ¨å¡«å……
                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: "ä¸ºæˆ‘çš„æœ‹å‹ç”Ÿæˆä¸€æ¡ 2026 æ–°å¹´æç®€å¥½è¿å¯„è¯­ï¼Œ15å­—ä»¥å†…ã€‚" }] }],
                            systemInstruction: { parts: [{ text: "ä½ æ˜¯ä¸€ä¸ªæ¸©æŸ”çš„å®éªŒå®¤ AIã€‚ä¸è¦ä½¿ç”¨è¡¨æƒ…ç¬¦å·ã€‚è¯­æ°”æµªæ¼«ä¸”å¯Œæœ‰ç§‘æŠ€æ„Ÿã€‚" }] }
                        })
                    });
                    const data = await response.json();
                    const text = data.candidates?.[0]?.content?.parts?.[0]?.text;
                    setAiMessage(text || "2026ï¼šæ‰€æœ‰çš„åšæŒï¼Œç»ˆå°†é‡ç»„æˆæœ€ç’€ç’¨çš„æƒŠå–œã€‚");
                } catch (e) {
                    setAiMessage("é‡å­æ³¢æ®µè™½æœ‰å¹²æ‰°ï¼Œä½† 2026 çš„å¥½è¿å·²å‡†æ—¶é€è¾¾ã€‚");
                } finally {
                    setIsAiLoading(false);
                }
            };

            // 3. æ ¸å¿ƒé‡ç»„æµç¨‹
            const startRefinery = async () => {
                if (isRunning) return;
                setIsRunning(true);
                setStep(0);
                setAiMessage("");
                
                const stages = ["æ”¶é›†å¥½è¿", "ä¸¢æ‰çƒ¦æ¼", "å‹åŠ›æ¶ˆå¤±", "å¿ƒæƒ³äº‹æˆ", "èº«ä½“å¥åº·", "å­¦ä¸šè¿›æ­¥", "å¹³å®‰é¡ºé‚"];
                
                for (let i = 1; i <= 7; i++) {
                    setStatus(stages[i-1]);
                    
                    // éŸ³æ•ˆé€»è¾‘ï¼šå‰å…­æ­¥ä½éŸ³ï¼Œç¬¬ä¸ƒæ­¥é«˜éŸ³
                    if (i < 7) {
                        playTone(200 + (i * 40), 'triangle', 0.1);
                    } else {
                        playTone(880, 'sine', 0.8);
                        // è§¦å‘ç¤¼èŠ±
                        window.confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
                        // è§¦å‘ AI
                        fetchFortune();
                    }

                    await new Promise(r => setTimeout(r, 600));
                    setStep(i);
                }
                setIsRunning(false);
            };

            return (
                <div className="min-h-screen flex items-center justify-center p-6">
                    <div className="w-full max-w-sm glass-panel rounded-[3rem] p-10 text-center relative">
                        <div className="mb-10 opacity-30 text-[9px] tracking-[0.3em] uppercase">
                            2026 Quantum Lab
                        </div>

                        {/* ä¹å™¨æ˜¾ç¤ºåŒº */}
                        <div className={`text-7xl mb-8 transition-all duration-1000 ${step === 7 ? 'diamond-glow scale-110' : 'scale-75 opacity-20'}`}>
                            {step === 7 ? 'ğŸªˆ' : 'ğŸ¥'}
                        </div>

                        <h2 className="text-xl font-bold tracking-widest mb-2">
                            {step === 7 ? "2026 çš„ç’€ç’¨" : "2025 çš„çƒ¦æ¼"}
                        </h2>
                        
                        <div className="min-h-[20px] mb-8">
                            <p className="text-blue-500 text-[10px] tracking-[0.2em] uppercase">
                                {status}
                            </p>
                        </div>

                        {/* AI å¯„è¯­æ˜¾ç¤º */}
                        {step === 7 && (
                            <div className="mb-10 p-4 rounded-2xl bg-white/5 border border-white/5">
                                <p className="text-sm italic text-blue-100/80 leading-relaxed typing">
                                    {isAiLoading ? "æ­£åœ¨æ„Ÿåº”é‡å­æ³¢æ®µ..." : aiMessage}
                                </p>
                            </div>
                        )}

                        <button 
                            onClick={startRefinery} 
                            disabled={isRunning}
                            className="w-full py-5 rounded-2xl bg-white text-black font-bold text-[10px] tracking-[0.3em] uppercase active:scale-95 disabled:opacity-20 transition-all"
                        >
                            {isRunning ? "æ­£åœ¨é‡ç»„..." : (step === 7 ? "âœ¨ å†æ¬¡æ„Ÿåº” âœ¨" : "å¯åŠ¨åŸå­é‡ç»„")}
                        </button>

                        <div className="mt-8 text-[8px] opacity-10 tracking-widest">
                            SPECIAL ENCRYPTED FOR XIN HUI
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
